<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DropX - File Sharing</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="style.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
    }

    /* Sidebar transition for mobile */
    #sidebar {
      transition: transform 0.3s ease-in-out;
    }

    /* Sidebar hidden by default on mobile */
    @media (max-width: 1024px) {
      #sidebar {
        transform: translateX(-100%);
      }
      #sidebar.active {
        transform: translateX(0);
      }
      main {
        margin-left: 0 !important;
        padding-top: 5rem; /* space for fixed header */
      }
    }

    /* Fix z-index stacking for header */
    header {
      z-index: 30;
      position: relative;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 flex h-screen overflow-hidden">

  <!-- ===== Mobile Header ===== -->
  <header class="lg:hidden fixed top-0 left-0 right-0 bg-white shadow-md p-4 flex justify-between items-center z-20">
    <h1 class="text-2xl font-bold text-indigo-600">DropX</h1>
    <button id="menuToggle" class="text-indigo-600 focus:outline-none">
      <i data-lucide="menu" class="h-6 w-6"></i>
    </button>
  </header>

  <!-- ===== Sidebar ===== -->
  <aside id="sidebar" class="w-64 bg-white p-6 flex flex-col h-screen fixed top-0 left-0 shadow-lg z-10 lg:translate-x-0">
    <div class="h-12 flex items-center mb-6">
      <span class="text-3xl font-bold text-indigo-600">DropX</span>
    </div>

    <label for="sidebarFileInput" class="w-full bg-indigo-600 text-white rounded-lg p-3 flex items-center justify-center font-semibold shadow-md hover:bg-indigo-700 transition">
      <i data-lucide="plus" class="mr-2 h-5 w-5"></i> Start File Transfer
      <input type="file" id="sidebarFileInput" multiple style="display:none">
    </label>

    <nav class="flex-1 flex flex-col mt-8 justify-between">
      <div class="space-y-2">
        <a href="#" class="nav-link flex items-center p-3 rounded-lg bg-indigo-100 text-indigo-700 font-semibold" data-section="devices">
          <i data-lucide="laptop" class="mr-3 h-5 w-5"></i> Connected Devices
        </a>
        <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-600 hover:bg-gray-200" data-section="transfers">
          <i data-lucide="arrow-left-right" class="mr-3 h-5 w-5"></i> Active Transfers
        </a>
        <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-600 hover:bg-gray-200" data-section="history">
          <i data-lucide="history" class="mr-3 h-5 w-5"></i> History
        </a>
      </div>

      <div class="border-t border-gray-200 pt-4 mt-4">
        <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-600 hover:bg-gray-200" data-section="about">
          <i data-lucide="info" class="mr-3 h-5 w-5"></i> About DropX
        </a>
      </div>
    </nav>
  </aside>

  <!-- ===== Main Content ===== -->
  <main class="flex-1 lg:ml-64 p-6 overflow-y-auto transition-all duration-300">
   <header class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4">
  <div class="relative w-full sm:w-96 hidden sm:block">
    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"></i>
    <input type="search" placeholder="Search connected devices or transfers..." class="pl-12 pr-4 py-3 rounded-lg border border-gray-300 bg-white w-full focus:outline-none focus:ring-2 focus:ring-indigo-500">
  </div>
</header>


    <!-- Devices Page -->
    <div id="page-devices" class="page-content">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <section class="bg-white p-6 rounded-lg shadow-md">
          <h2 class="text-xl font-semibold mb-4">Connected Devices</h2>
          <div class="space-y-2">
            <div id="myId" class="text-gray-700"><strong>You:</strong> ...</div>
            <div id="status" class="text-gray-500"><strong>Status:</strong> Connecting...</div>
          </div>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-4">Peers</h3>
          <ul id="peers" class="space-y-1"></ul>
          <p class="text-gray-500">No devices found. Open DropX on another device.</p>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md flex flex-col">
          <div id="dropzone" class="border-2 border-dashed border-gray-400 rounded-lg flex-1 flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 transition bg-gray-50 p-4 text-center">
            <p class="text-gray-500 mb-4 text-lg">Drag & Drop Files Here</p>
          </div>
          <button id="chooseBtn" class="w-full mt-4 bg-indigo-800 text-white rounded-lg px-6 py-3 font-semibold hover:bg-indigo-900 transition">Choose File</button>
          <input type="file" id="fileInput" multiple style="display:none">
          <p id="fileInfo" class="mt-4 text-sm text-gray-600 px-4 text-center"></p>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-4">Active Transfers</h3>
          <div id="transfers">
            <p class="text-gray-500">No active transfers.</p>
          </div>
        </section>
      </div>
    </div>

    <!-- About Page -->
    <div id="page-about" class="page-content hidden">
      <section class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-semibold mb-4">About DropX</h2>
        <p class="text-gray-700">DropX is a lightweight, local-network file sharing app inspired by Snapdrop and PairDrop.</p>
        <p class="mt-4 text-gray-700">Itâ€™s designed for speed, simplicity, and privacy.</p>
        <p class="mt-8 text-gray-500 text-sm">Version 1.1.0</p>
      </section>
    </div>
  </main>

  <!-- Offline Overlay -->
  <div id="offlineOverlay" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg text-center">
      <h2 class="text-lg font-semibold mb-4 text-red-600">Connection Lost</h2>
      <p class="mb-4">Trying to reconnect...</p>
      <button id="retryConnect" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Retry</button>
    </div>
  </div>

  <div id="connectionState" class="fixed bottom-2 right-4 bg-gray-800 text-white px-3 py-1 rounded text-sm shadow-md">
    Connecting...
  </div>

  <script src="app.js" defer></script>
  <script>
    lucide.createIcons();

    // Sidebar toggle (mobile)
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menuToggle');
    menuToggle?.addEventListener('click', () => sidebar.classList.toggle('active'));

    // Page switching
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page-content');
    navLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        navLinks.forEach(l => l.classList.remove('bg-indigo-100', 'text-indigo-700', 'font-semibold'));
        link.classList.add('bg-indigo-100', 'text-indigo-700', 'font-semibold');
        const target = 'page-' + link.dataset.section;
        pages.forEach(p => p.classList.add('hidden'));
        document.getElementById(target)?.classList.remove('hidden');
        if (window.innerWidth < 1024) sidebar.classList.remove('active');
      });
    });
  </script>
</body>
</html>
